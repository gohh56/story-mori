<template>
  <div class="story-create-container">
    <router-link :to="{name: 'storyList'}">キャンセル</router-link>
    <h2>New Story</h2>
    <form @submit.prevent="saveStory">
      <input v-model.trim="title" placeholder="Title...">
      <textarea v-model.trim="text" placeholder="First Page..."/>
      <button type="submit">Create new story</button>
    </form>
  </div>
</template>

<script>
import { saveStory } from "../lib/api-service";
export default {
  name: "StoryCreate",
  data() {
    return {
      title: "",
      text: ""
    };
  },
  methods: {
    async saveStory() {
      const { title, text } = this;

      if (!title || !text) return;

      const story = {
        title,
        text
      };
      const { storyId, pageId } = await saveStory(story);
      this.$router.push({ name: "page", params: { storyId, pageId } });
    }
  }
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
</style>
